---
layout:     post
title:      JavaScript中的闭包
subtitle:   
date:       2010-03-08
author:     spin6lock
header-img: img/post-bg-kuaidi.jpg
catalog: true
tags:
    - python
---
一看到闭包这个词，我就会想起线性代数中的封闭空间，也就是说，这个空间中的所有向量，无论经过何种运算，最终结果还是会落在该空间中。那么JavaScript中会不会也是类似的概念呢？

我们来看一个定义：

所谓闭包，指的是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。

这说明了，JavaScript中的闭包是包含了上下文的函数，也就是说，这个函数的作用基础，是它所处的环境，这是不能超越的，跟线性代数是不是有一点似曾相识的感觉呢？

换个角度看，闭包的作用是为了实现OO。JavaScript中，没有像C++那样的public、private、protect属性标识， 建立起类比较困难。类是带行为的数据，而闭包是带数据的行为，在JavaScript中我们用函数的定义代替类的定义，用闭包代替了setter/getter方法。请看一段livecode：

上文中n的声明和函数getter组成了一个典型的闭包。最终返回的函数，即刚刚所讲的行为，其实目的就是为了得到n的值，所以说闭包就是带有数据的行为。

另外，我觉得阮一峰说的闭包也是很简洁的：我的理解是，闭包就是能够读取其他函数内部变量的函数。

我希望各位能够真正从学术上的定义理解闭包，因为所有对闭包定义的诠释和简化都是对JavaScript的片面解读。
